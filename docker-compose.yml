services:
  aisstream-ingest:
    build: .
    image: collect:latest
    container_name: data-ingest
    restart: unless-stopped
    volumes:
      - ./output:/data
    
    # Health check configuration
    healthcheck:
      test: ["CMD", "/bin/server", "--health-check"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
    
    # Resource limits
    deploy:
      resources:
        limits:
          memory: 1G
          cpus: '0.5'
        reservations:
          memory: 512M
          cpus: '0.25'
    
    # Environment variables for application configuration
    env_file: ./aisstream_env

# Uncomment if you need custom networks
# networks:
#   data-network:
#     driver: bridge